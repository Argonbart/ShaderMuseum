[gd_scene load_steps=20 format=3 uid="uid://bedj5i0t6tevn"]

[ext_resource type="Script" path="res://player.gd" id="1_jx5g5"]
[ext_resource type="Script" path="res://presentation/presenter.gd" id="1_lm8r0"]
[ext_resource type="Texture2D" uid="uid://bwunbth5lds86" path="res://icon.svg" id="2_rtug0"]
[ext_resource type="Script" path="res://camera.gd" id="3_xl8s0"]
[ext_resource type="Material" uid="uid://dlpyf1awwppwg" path="res://presentation/label1/label1_material.tres" id="4_h3db0"]
[ext_resource type="Texture2D" uid="uid://dsulqpbnp7mop" path="res://seamless-wavy-line-pattern-png.webp" id="5_4f437"]
[ext_resource type="Shader" path="res://presentation/color_rect_1.gdshader" id="6_jupxd"]
[ext_resource type="FontFile" uid="uid://b1ytffl6n528u" path="res://fonts/Besty Beige.ttf" id="7_yb5up"]
[ext_resource type="FontFile" uid="uid://df1hjkq32lfto" path="res://fonts/Cheese Market.otf" id="8_pgxwn"]
[ext_resource type="Script" path="res://presentation/frame1_shader.gd" id="9_335i0"]
[ext_resource type="FontFile" uid="uid://bxljwiekotetl" path="res://fonts/PixelCode-Thin-Italic.otf" id="9_rnjar"]

[sub_resource type="Environment" id="Environment_1bayy"]
background_mode = 3
glow_enabled = true
glow_intensity = 2.0
glow_strength = 1.5
glow_blend_mode = 0

[sub_resource type="QuadMesh" id="QuadMesh_8r0xo"]
size = Vector2(2000, 40)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2p0xb"]
size = Vector2(2000, 100)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_188vg"]
size = Vector2(64, 64)

[sub_resource type="Shader" id="Shader_5bao2"]
code = "shader_type canvas_item;

uniform vec2 fill_tex_offset = vec2(0.0);
uniform vec2 fill_tex_scale = vec2(1.0);
uniform sampler2D fill_tex;
uniform vec4 base_color : source_color = vec4(1.0, 1.0, 0.0, 1.0);
uniform vec4 fill_brighten_color : source_color = vec4(0.0, 0.0, 1.0, 0.2);
uniform float cutoff : hint_range(0.0, 1.0) = 0.5;
uniform vec4 outline_color : source_color = vec4(1.0, 0.0, 0.0, 1.0);
uniform float outline_thickness : hint_range(0.0, 5.0) = 1.0;

void vertex() {
    VERTEX.y += 50.0 * sin(TIME * 0.001 * VERTEX.x + PI);
}

void fragment() {
    // Base texture sampling
    vec4 fill_tex_color = texture(fill_tex, (UV + fill_tex_offset) * fill_tex_scale);
    vec4 not_working_tex_color = texture(TEXTURE, UV);
    vec4 own_texture_color = vec4(COLOR.rgb, not_working_tex_color.a); // Workaround for DynamicFonts
    float own_texture_color_cutoff = step(own_texture_color.r, cutoff);

    // Colored fill
    vec4 colored_fill = vec4(own_texture_color.rgb * fill_tex_color.a * base_color.rgb, own_texture_color.a);
    vec4 new_colored_fill = vec4(mix(colored_fill.rgb, fill_brighten_color.rgb, fill_brighten_color.a), colored_fill.a);
    vec3 merged_color = mix(colored_fill.rgb + new_colored_fill.rgb, outline_color.rgb, own_texture_color_cutoff);

    // Outline effect
    float alpha = own_texture_color.a;
    float outline = 0.0;

    // Sample surrounding pixels for outline
    for (int x = -1; x <= 1; x++) {
        for (int y = -1; y <= 1; y++) {
            if (x != 0 || y != 0) {
                vec2 offset = vec2(float(x), float(y)) * outline_thickness / SCREEN_PIXEL_SIZE;
                vec4 neighbor_color = texture(TEXTURE, UV + offset);
                outline = max(outline, neighbor_color.a);
            }
        }
    }

    // Combine outline and base color
    vec4 final_outline_color = vec4(outline_color.rgb, outline * (1.0 - alpha));
    COLOR = mix(vec4(merged_color, colored_fill.a), final_outline_color, outline);
}
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_idwsr"]
shader = SubResource("Shader_5bao2")
shader_parameter/fill_tex_offset = Vector2(0, 0)
shader_parameter/fill_tex_scale = Vector2(0, 0)
shader_parameter/base_color = Color(1, 1, 1, 0)
shader_parameter/fill_brighten_color = Color(0, 0, 0, 0)
shader_parameter/cutoff = 0.5
shader_parameter/outline_color = Color(1, 1, 0, 1)
shader_parameter/outline_thickness = 5.925
shader_parameter/fill_tex = ExtResource("5_4f437")

[sub_resource type="FontVariation" id="FontVariation_dk3yx"]
variation_embolden = 1.0
spacing_glyph = 60

[sub_resource type="ShaderMaterial" id="ShaderMaterial_jkm43"]
shader = ExtResource("6_jupxd")
shader_parameter/is_triggered = false
shader_parameter/is_triggered_2 = null
shader_parameter/move_speed = 2000.0
shader_parameter/time_passed = null

[node name="Presentation" type="Node2D"]

[node name="Presenter" type="Node" parent="." node_paths=PackedStringArray("player", "frame")]
script = ExtResource("1_lm8r0")
player = NodePath("../Player")
frame = [NodePath("../Title"), NodePath("../Frame1")]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_1bayy")

[node name="Ground" type="StaticBody2D" parent="."]
scale = Vector2(10, 1)

[node name="GroundMesh" type="MeshInstance2D" parent="Ground"]
modulate = Color(0.266575, 0.266575, 0.266575, 1)
position = Vector2(653, 665)
mesh = SubResource("QuadMesh_8r0xo")

[node name="GroundCollision" type="CollisionShape2D" parent="Ground"]
position = Vector2(653, 657)
shape = SubResource("RectangleShape2D_2p0xb")

[node name="Player" type="CharacterBody2D" parent="." node_paths=PackedStringArray("presenter")]
position = Vector2(0, 613)
script = ExtResource("1_jx5g5")
presenter = NodePath("../Presenter")

[node name="PlayerSprite" type="Sprite2D" parent="Player"]
scale = Vector2(0.5, 0.5)
texture = ExtResource("2_rtug0")

[node name="PlayerCollision" type="CollisionShape2D" parent="Player"]
shape = SubResource("RectangleShape2D_188vg")

[node name="Camera2D" type="Camera2D" parent="." node_paths=PackedStringArray("player")]
position = Vector2(0, 324)
zoom = Vector2(1.5, 1.5)
script = ExtResource("3_xl8s0")
player = NodePath("../Player")

[node name="WhiteMarkers" type="Node2D" parent="."]

[node name="WhiteMarker0" type="ColorRect" parent="WhiteMarkers"]
offset_left = -1000.0
offset_top = 314.0
offset_right = -960.0
offset_bottom = 354.0

[node name="WhiteMarker1" type="ColorRect" parent="WhiteMarkers"]
offset_left = 1000.0
offset_top = 312.0
offset_right = 1040.0
offset_bottom = 352.0

[node name="WhiteMarker2" type="ColorRect" parent="WhiteMarkers"]
offset_left = 3000.0
offset_top = 312.0
offset_right = 3040.0
offset_bottom = 352.0

[node name="WhiteMarker3" type="ColorRect" parent="WhiteMarkers"]
offset_left = 5000.0
offset_top = 312.0
offset_right = 5040.0
offset_bottom = 352.0

[node name="WhiteMarker4" type="ColorRect" parent="WhiteMarkers"]
offset_left = 7000.0
offset_top = 312.0
offset_right = 7040.0
offset_bottom = 352.0

[node name="WhiteMarker5" type="ColorRect" parent="WhiteMarkers"]
offset_left = 9000.0
offset_top = 312.0
offset_right = 9040.0
offset_bottom = 352.0

[node name="WhiteMarker6" type="ColorRect" parent="WhiteMarkers"]
offset_left = 11000.0
offset_top = 312.0
offset_right = 11040.0
offset_bottom = 352.0

[node name="WhiteMarker7" type="ColorRect" parent="WhiteMarkers"]
offset_left = 13000.0
offset_top = 312.0
offset_right = 13040.0
offset_bottom = 352.0

[node name="WhiteMarker8" type="ColorRect" parent="WhiteMarkers"]
offset_left = 15000.0
offset_top = 312.0
offset_right = 15040.0
offset_bottom = 352.0

[node name="Title" type="Node2D" parent="."]

[node name="YellowFont" type="Label" parent="Title"]
material = SubResource("ShaderMaterial_idwsr")
custom_minimum_size = Vector2(400, 100)
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -1480.0
offset_right = 1480.0
offset_bottom = 546.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/outline_size = 5
theme_override_fonts/font = SubResource("FontVariation_dk3yx")
theme_override_font_sizes/font_size = 70
text = "SHADER MAGIC"
horizontal_alignment = 1
vertical_alignment = 1

[node name="BlackRedFont" type="Label" parent="Title"]
material = ExtResource("4_h3db0")
custom_minimum_size = Vector2(400, 100)
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -1480.0
offset_right = 1480.0
offset_bottom = 546.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/outline_size = 2
theme_override_fonts/font = SubResource("FontVariation_dk3yx")
theme_override_font_sizes/font_size = 70
text = "SHADER MAGIC"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Frame1" type="Node2D" parent="."]
position = Vector2(2000, 300)

[node name="FrameTitle" type="Label" parent="Frame1"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -600.0
offset_top = -300.0
offset_right = 45457.0
offset_bottom = 32481.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.01, 0.01)
theme_override_fonts/font = ExtResource("7_yb5up")
theme_override_font_sizes/font_size = 3000
text = "Was sind Shader?"

[node name="Text" type="Label" parent="Frame1"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -600.0
offset_top = -200.0
offset_right = 53347.0
offset_bottom = 46157.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.008, 0.008)
theme_override_fonts/font = ExtResource("8_pgxwn")
theme_override_font_sizes/font_size = 4000
text = "- Englisch \"shade\"
- Rendering-Effekte
- HÃ¤ufig 3D, heute 2D
- Parallelisiert auf GPU
- Schnell komplex
- Aufteilung in:

- Vertex Shader
- Fragment Shader"

[node name="Code" type="CodeEdit" parent="Frame1"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -200.0
offset_top = -200.0
offset_right = 400.0
offset_bottom = 100.0
grow_horizontal = 2
grow_vertical = 2
theme_override_fonts/font = ExtResource("9_rnjar")
theme_override_font_sizes/font_size = 20
text = "shader_type canvas_item;

void vertex() {
}"

[node name="Shader" type="ColorRect" parent="Frame1"]
material = SubResource("ShaderMaterial_jkm43")
offset_left = 500.0
offset_top = -300.0
offset_right = 900.0
offset_bottom = 100.0
scale = Vector2(0.1, 0.1)
script = ExtResource("9_335i0")
